{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":68,"index":83}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./Image","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":85},"end":{"line":5,"column":32,"index":117}}],"key":"I2Mr3f3chxmh02krEQCRqYY9hRA=","exportNames":["*"],"imports":1}},{"name":"./utils/resolveSources","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":196},"end":{"line":7,"column":55,"index":251}}],"key":"DpM65pxwg+MyXfeuGazS5AMaNMU=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use client';\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  exports.useImage = useImage;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _Image = require(_dependencyMap[1], \"./Image\");\n  var _utilsResolveSources = require(_dependencyMap[2], \"./utils/resolveSources\");\n  /**\n   * A hook that loads an image from the given source and returns a reference\n   * to the native image instance, or `null` until the first image is successfully loaded.\n   *\n   * It loads a new image every time the `uri` of the provided source changes.\n   * To trigger reloads in some other scenarios, you can provide an additional dependency list.\n   *\n   * > **warning** Avoid using this hook for large images without specifying size constraints,\n   * > as it may cause crashes due to excessive memory usage. It is recommended to use either\n   * > `maxWidth` or `maxHeight` option to scale down the image appropriately for your use case.\n   *\n   * @platform android\n   * @platform ios\n   * @platform web\n   *\n   * @example\n   * ```ts\n   * import { useImage, Image } from 'expo-image';\n   * import { Text } from 'react-native';\n   *\n   * export default function MyImage() {\n   *   const image = useImage('https://picsum.photos/1000/800', {\n   *     maxWidth: 800,\n   *     onError(error, retry) {\n   *       console.error('Loading failed:', error.message);\n   *     }\n   *   });\n   *\n   *   if (!image) {\n   *     return <Text>Image is loading...</Text>;\n   *   }\n   *\n   *   return <Image source={image} style={{ width: image.width / 2, height: image.height / 2 }} />;\n   * }\n   * ```\n   */\n  function useImage(source, options = {}, dependencies = []) {\n    const resolvedSource = (0, _utilsResolveSources.resolveSource)(source);\n    const [image, setImage] = (0, _react.useState)(null);\n\n    // Since options are not dependencies of the below effect, we store them in a ref.\n    // Once the image is asynchronously loaded, the effect will use the most recent options,\n    // instead of the captured ones (especially important for callbacks that may change in subsequent renders).\n    const optionsRef = (0, _react.useRef)(options);\n    optionsRef.current = options;\n    (0, _react.useEffect)(() => {\n      // We're doing some asynchronous action in this effect, so we should keep track\n      // if the effect was already cleaned up. In that case, the async action shouldn't change the state.\n      let isEffectValid = true;\n      function loadImage() {\n        _Image.Image.loadAsync(resolvedSource, options).then(image => {\n          if (isEffectValid) {\n            setImage(image);\n          }\n        }).catch(error => {\n          if (!isEffectValid) {\n            return;\n          }\n          if (optionsRef.current.onError) {\n            optionsRef.current.onError(error, loadImage);\n          } else {\n            // Print unhandled errors to the console.\n            console.error(`Loading an image from '${resolvedSource.uri}' failed, use 'onError' option to handle errors and suppress this message`);\n            console.error(error);\n          }\n        });\n      }\n      loadImage();\n      return () => {\n        // Invalidate the effect and release the shared object to free up memory.\n        isEffectValid = false;\n        image?.release();\n      };\n    }, [resolvedSource.uri, ...dependencies]);\n    return image;\n  }\n});","lineCount":88,"map":[[2,2,1,0],[2,14,1,12],[3,2,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,45,0,"exports"],[8,9,45,0],[8,10,45,0,"useImage"],[8,18,45,0],[8,21,45,0,"useImage"],[8,29,45,0],[9,2,3,0],[9,6,3,0,"_react"],[9,12,3,0],[9,15,3,0,"require"],[9,22,3,0],[9,23,3,0,"_dependencyMap"],[9,37,3,0],[10,2,5,0],[10,6,5,0,"_Image"],[10,12,5,0],[10,15,5,0,"require"],[10,22,5,0],[10,23,5,0,"_dependencyMap"],[10,37,5,0],[11,2,7,0],[11,6,7,0,"_utilsResolveSources"],[11,26,7,0],[11,29,7,0,"require"],[11,36,7,0],[11,37,7,0,"_dependencyMap"],[11,51,7,0],[12,2,9,0],[13,0,10,0],[14,0,11,0],[15,0,12,0],[16,0,13,0],[17,0,14,0],[18,0,15,0],[19,0,16,0],[20,0,17,0],[21,0,18,0],[22,0,19,0],[23,0,20,0],[24,0,21,0],[25,0,22,0],[26,0,23,0],[27,0,24,0],[28,0,25,0],[29,0,26,0],[30,0,27,0],[31,0,28,0],[32,0,29,0],[33,0,30,0],[34,0,31,0],[35,0,32,0],[36,0,33,0],[37,0,34,0],[38,0,35,0],[39,0,36,0],[40,0,37,0],[41,0,38,0],[42,0,39,0],[43,0,40,0],[44,0,41,0],[45,0,42,0],[46,0,43,0],[47,0,44,0],[48,2,45,7],[48,11,45,16,"useImage"],[48,19,45,24,"useImage"],[48,20,46,2,"source"],[48,26,46,39],[48,28,47,2,"options"],[48,35,47,27],[48,38,47,30],[48,39,47,31],[48,40,47,32],[48,42,48,2,"dependencies"],[48,54,48,30],[48,57,48,33],[48,59,48,35],[48,61,49,19],[49,4,50,2],[49,10,50,8,"resolvedSource"],[49,24,50,22],[49,27,50,25],[49,31,50,25,"resolveSource"],[49,51,50,38],[49,52,50,38,"resolveSource"],[49,65,50,38],[49,67,50,39,"source"],[49,73,50,45],[49,74,50,61],[50,4,51,2],[50,10,51,8],[50,11,51,9,"image"],[50,16,51,14],[50,18,51,16,"setImage"],[50,26,51,24],[50,27,51,25],[50,30,51,28],[50,34,51,28,"useState"],[50,40,51,36],[50,41,51,36,"useState"],[50,49,51,36],[50,51,51,54],[50,55,51,58],[50,56,51,59],[52,4,53,2],[53,4,54,2],[54,4,55,2],[55,4,56,2],[55,10,56,8,"optionsRef"],[55,20,56,18],[55,23,56,21],[55,27,56,21,"useRef"],[55,33,56,27],[55,34,56,27,"useRef"],[55,40,56,27],[55,42,56,46,"options"],[55,49,56,53],[55,50,56,54],[56,4,57,2,"optionsRef"],[56,14,57,12],[56,15,57,13,"current"],[56,22,57,20],[56,25,57,23,"options"],[56,32,57,30],[57,4,59,2],[57,8,59,2,"useEffect"],[57,14,59,11],[57,15,59,11,"useEffect"],[57,24,59,11],[57,26,59,12],[57,32,59,18],[58,6,60,4],[59,6,61,4],[60,6,62,4],[60,10,62,8,"isEffectValid"],[60,23,62,21],[60,26,62,24],[60,30,62,28],[61,6,64,4],[61,15,64,13,"loadImage"],[61,24,64,22,"loadImage"],[61,25,64,22],[61,27,64,25],[62,8,65,6,"Image"],[62,14,65,11],[62,15,65,11,"Image"],[62,20,65,11],[62,21,65,12,"loadAsync"],[62,30,65,21],[62,31,65,22,"resolvedSource"],[62,45,65,36],[62,47,65,38,"options"],[62,54,65,45],[62,55,65,46],[62,56,66,9,"then"],[62,60,66,13],[62,61,66,15,"image"],[62,66,66,20],[62,70,66,25],[63,10,67,10],[63,14,67,14,"isEffectValid"],[63,27,67,27],[63,29,67,29],[64,12,68,12,"setImage"],[64,20,68,20],[64,21,68,21,"image"],[64,26,68,26],[64,27,68,27],[65,10,69,10],[66,8,70,8],[66,9,70,9],[66,10,70,10],[66,11,71,9,"catch"],[66,16,71,14],[66,17,71,16,"error"],[66,22,71,21],[66,26,71,26],[67,10,72,10],[67,14,72,14],[67,15,72,15,"isEffectValid"],[67,28,72,28],[67,30,72,30],[68,12,73,12],[69,10,74,10],[70,10,75,10],[70,14,75,14,"optionsRef"],[70,24,75,24],[70,25,75,25,"current"],[70,32,75,32],[70,33,75,33,"onError"],[70,40,75,40],[70,42,75,42],[71,12,76,12,"optionsRef"],[71,22,76,22],[71,23,76,23,"current"],[71,30,76,30],[71,31,76,31,"onError"],[71,38,76,38],[71,39,76,39,"error"],[71,44,76,44],[71,46,76,46,"loadImage"],[71,55,76,55],[71,56,76,56],[72,10,77,10],[72,11,77,11],[72,17,77,17],[73,12,78,12],[74,12,79,12,"console"],[74,19,79,19],[74,20,79,20,"error"],[74,25,79,25],[74,26,80,14],[74,52,80,40,"resolvedSource"],[74,66,80,54],[74,67,80,55,"uri"],[74,70,80,58],[74,145,81,12],[74,146,81,13],[75,12,82,12,"console"],[75,19,82,19],[75,20,82,20,"error"],[75,25,82,25],[75,26,82,26,"error"],[75,31,82,31],[75,32,82,32],[76,10,83,10],[77,8,84,8],[77,9,84,9],[77,10,84,10],[78,6,85,4],[79,6,87,4,"loadImage"],[79,15,87,13],[79,16,87,14],[79,17,87,15],[80,6,89,4],[80,13,89,11],[80,19,89,17],[81,8,90,6],[82,8,91,6,"isEffectValid"],[82,21,91,19],[82,24,91,22],[82,29,91,27],[83,8,92,6,"image"],[83,13,92,11],[83,15,92,13,"release"],[83,22,92,20],[83,23,92,21],[83,24,92,22],[84,6,93,4],[84,7,93,5],[85,4,94,2],[85,5,94,3],[85,7,94,5],[85,8,94,6,"resolvedSource"],[85,22,94,20],[85,23,94,21,"uri"],[85,26,94,24],[85,28,94,26],[85,31,94,29,"dependencies"],[85,43,94,41],[85,44,94,42],[85,45,94,43],[86,4,96,2],[86,11,96,9,"image"],[86,16,96,14],[87,2,97,0],[88,0,97,1],[88,3]],"functionMap":{"names":["<global>","useImage","useEffect$argument_0","loadImage","Image.loadAsync.then$argument_0","Image.loadAsync.then._catch$argument_0","<anonymous>"],"mappings":"AAA;OC4C;YCc;ICK;cCE;SDI;eEC;SFa;KDC;WII;KJI;GDC;CDG"},"hasCjsExports":false},"type":"js/module"}]}